<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="stylesheets/style.css">
    <title>Weekly Calendar</title>
</head>
<body onload="main()">
<h1>Weekly Calendar</h1>
<p>Manage your calendar by adding, editing, and removing events here!</p></br>

<form id="addEvent">
    <fieldset>
        <legend>Add Event</legend>
        <label for="eName">Event Name:</label>
        <input id="eName" name="eName" type="text"></br>
        <label for="eDay">Day:</label>
        <select id="eDay" name=""eDay>
            <option value="0">Sunday</option>
            <option value="1">Monday</option>
            <option value="2">Tuesday</option>
            <option value="3">Wednesday</option>
            <option value="4">Thursday</option>
            <option value="5">Friday</option>
            <option value="6">Saturday</option>
        </select></br>
        <label for="eStart">Start Time:</label>
        <select id="eStart" name="eStart">
            <option value="0.0">12:00am</option>
            <!--<option value="0.5">12:30am</option>-->
            <option value="1.0">1:00am</option>
            <!--<option value="1.5">1:30am</option>-->
            <option value="2.0">2:00am</option>
            <!--<option value="2.5">2:30am</option>-->
            <option value="3.0">3:00am</option>
            <option value="4.0">4:00am</option>
            <option value="5.0">5:00am</option>
            <option value="6.0">6:00am</option>
            <option value="7.0">7:00am</option>
            <option value="8.0">8:00am</option>
            <option value="9.0">9:00am</option>
            <option value="10.0">10:00am</option>
            <option value="11.0">11:00am</option>
            <option value="12.0">12:00pm</option>
            <option value="13.0">1:00pm</option>
            <option value="14.0">2:00pm</option>
            <option value="15.0">3:00pm</option>
            <option value="16.0">4:00pm</option>
            <option value="17.0">5:00pm</option>
            <option value="18.0">6:00pm</option>
            <option value="19.0">7:00pm</option>
            <option value="20.0">8:00pm</option>
            <option value="21.0">9:00pm</option>
            <option value="22.0">10:00pm</option>
            <option value="23.0">11:00pm</option>
        </select></br>
        <label for="eEnd">End Time:</label>
        <select id="eEnd" name="eEnd">
            <option value="0.0">12:00am</option>
            <!--<option value="0.5">12:30am</option>-->
            <option value="1.0">1:00am</option>
            <!--<option value="1.5">1:30am</option>-->
            <option value="2.0">2:00am</option>
            <!--<option value="2.5">2:30am</option>-->
            <option value="3.0">3:00am</option>
            <option value="4.0">4:00am</option>
            <option value="5.0">5:00am</option>
            <option value="6.0">6:00am</option>
            <option value="7.0">7:00am</option>
            <option value="8.0">8:00am</option>
            <option value="9.0">9:00am</option>
            <option value="10.0">10:00am</option>
            <option value="11.0">11:00am</option>
            <option value="12.0">12:00pm</option>
            <option value="13.0">1:00pm</option>
            <option value="14.0">2:00pm</option>
            <option value="15.0">3:00pm</option>
            <option value="16.0">4:00pm</option>
            <option value="17.0">5:00pm</option>
            <option value="18.0">6:00pm</option>
            <option value="19.0">7:00pm</option>
            <option value="20.0">8:00pm</option>
            <option value="21.0">9:00pm</option>
            <option value="22.0">10:00pm</option>
            <option value="23.0">11:00pm</option>
        </select></br>
        <label for="eHourly">Hourly Wage:</label>
        <input id="eHourly" name="eHourly" type="number"></br></br>
        <button type="button" onclick="addEvent()">Create Event</button>
    </fieldset>
</form></br>

<p>Content Test 1: <span id="test1"></span></p>
<p>Content Test 2: <span id="test2"></span></p>
<p>Content Test 3: <span id="test3"></span></p>
</body>
<script>
class Calendar {

    constructor(UserID, CalendarID, EventsList) {
         /**
          * The Calendar Constructor - Empty calendar will be created for the user.
          * @param UserID - type: int - Key to link the calendar to the user
          * @param CalendarID - type: int - Unique key to identify the calendar
          * @param EventsList - type: list - An initially empty list representing the user's weekly calendar
          *
          */
        this.UserID = UserID;
        this.CalendarID = CalendarID;
        this.EventsList = EventsList;

    }
}

class Event {

    constructor(EventID, EventName, Day, StartTime, EndTime, HourlyWage) {
    /**
     * The Event Constructor - Creates an event and adds it to the User's calendar.
     * @param EventID - type: int - Key to link the event to the calendar
     * @param EventName - type: string - User-given name for their event
     * @param Day - type: int - Integer representing the day of the week (0=Sunday, 6=Saturday)
     * @param StartTime - type: float - Float representation of the event's start time (ex: 9:00am=9.0, 9:30pm=21.5)
     * @param EndTime - type: float - Float representation of the event's end time (ex: 9:00am=9.0, 9:30pm=21.5)
     * @param HourlyWage - type: float - User's hourly pay for this event (cannot be less than 0)
     *
     */
    this.EventID = EventID;
    this.EventName = EventName;
    this.Day = Day;
    this.StartTime = StartTime;
    this.EndTime = EndTime;
    this.HourlyWage = HourlyWage;
    }
    // Class Setter Functions
    setEventID(EventID) {this.EventID = EventID;}
    setEventName(EventName) {this.EventName = EventName;}
    setDay(Day) {this.Day = Day;}
    setStartTime(StartTime) {this.StartTime = StartTime;}
    setEndTime(EndTime) {this.EndTime = EndTime;}
    setHourlyWage(HourlyWage) {this.HourlyWage = HourlyWage;}

    // Class Getter Functions
    getEventID() {return this.EventID;}
    getEventName() {return this.EventName;}
    getDay() {return this.Day;}
    getStartTime() {
        let minutes = this.StartTime;
        let min = "";
        while(minutes > 1) {
            minutes -= 1;
        }
        switch(minutes){
            case 0.25:
                min = ":15";
                break;
            case 0.5:
                min = ":30";
                break;
            case 0.75:
                min = ":45";
                break;
            default:
                min = ":00";
                break;
        }
        if(this.StartTime - 12 > 0.76) {
            let time = Math.floor(this.StartTime - 12);
            time = time.toString() + min + "pm";
            return time
        }
        else if (this.StartTime - 12 >= 0) {
            let time = Math.floor(this.StartTime);
            time = time.toString() + min + "pm";
            return time
        }
        else {
            let time = Math.floor(this.StartTime);
            return time.toString() + min + "am";
        }
    }
    getEndTime() {
        let minutes = this.EndTime;
        let min = "";
        while(minutes > 1) {
            minutes -= 1;
        }
        switch(minutes){
            case 0.25:
                min = ":15";
                break;
            case 0.5:
                min = ":30";
                break;
            case 0.75:
                min = ":45";
                break;
            default:
                min = ":00";
                break;
        }
        if(this.EndTime - 12 > 0.76) {
            let time = Math.floor(this.EndTime - 12);
            time = time.toString() + min + "pm";
            return time
        }
        else if (this.EndTime - 12 >= 0) {
            let time = Math.floor(this.EndTime);
            time = time.toString() + min + "pm";
            return time
        }
        else {
            let time = Math.floor(this.EndTime);
            return time.toString() + min + "am";
        }
    }
    getHourlyWage() {return this.HourlyWage;}

    calculateNumHours() {
        return this.EndTime - this.StartTime;
    }

    calculateEventIncome() {
        return this.calculateNumHours() * this.HourlyWage;
    }

    printEvent() {
        let s = "";
        s += this.EventName + ", ";
        switch(this.Day) {
            case 0:
                s += "Sunday, ";
                break;
            case 1:
                s += "Monday, ";
                break;
            case 2:
                s += "Tuesday, ";
                break;
            case 3:
                s += "Wednesday, ";
                break;
            case 4:
                s += "Thursday, ";
                break;
            case 5:
                s += "Friday, ";
                break;
            case 6:
                s += "Saturday, ";
                break;
        }
        s += "Start: " + this.getStartTime() + ", ";
        s += "End: " + this.getEndTime() + ", ";
        s += "Hourly Wage: $" + this.HourlyWage.toFixed(2).toString() + "/hr, ";
        s += "Event Length: " + this.calculateNumHours().toString() + " hours, ";
        s += "Event Income: $" + this.calculateEventIncome().toFixed(2).toString();
        return s;
    }
}
// Temp Events List
let TempEventsList = [];
let EventNum = 0;

function updateTest3() {
    let d = "";
    for (let i = 0; i < TempEventsList.length; i++) {
        d += "[" + TempEventsList[i].printEvent() +"], ";
    }
    document.getElementById("test3").innerHTML = d;
}

function addEvent() {
    let eventName = document.getElementById("eName").value;
    let eventDay = document.getElementById("eDay").value;
    let eventStart = document.getElementById("eStart").value;
    let eventEnd = document.getElementById("eEnd").value;
    let eventWage = document.getElementById("eHourly").value;
    let d = "";
    d += EventNum.toString() + ", " + eventName + ", " + eventDay.toString() + ", ";
    d += eventStart.toString() + ", " + eventEnd.toString() + ", " + eventWage.toString();
    let newEvent = new Event(EventNum, eventName, eventDay, eventStart, eventEnd, eventWage);
    TempEventsList.push(d);
    // updateTest3();
    document.getElementById("test3").innerHTML = TempEventsList[0];
    EventNum++;
}

function main() {
    // let Event1 = new Event(1, "Event 1", 0, 9.0, 12.0, 10.0);
    // Event1.setEventName("New Event");
    // TempEventsList.push(Event1);
    // let s = Event1.printEvent();
    // document.getElementById("test1").innerHTML = TempEventsList[0].printEvent();
    // let Event2 = new Event(2, "Work", 1, 12.5, 17, 11.0);
    // TempEventsList.push(Event2);
    // let s2 = Event2.printEvent();
    // document.getElementById("test2").innerHTML = s2;

}
</script>
</html>
